

### 死锁

只有满足以下4个条件才会导致死锁：

1. 互斥，共享资源 X 和 Y 只能被一个线程占用；
2. 占有且等待，线程 T1 已经取得共享资源 X，在等待共享资源 Y 的时候，不释放共享资源 X；
3. 不可抢占，其他线程不能强行抢占线程 T1 占有的资源；
4. 循环等待，线程 T1 等待线程 T2 占有的资源，线程 T2 等待线程 T1 占有的资源，就是循环等待。

为了避免死锁，我们只要破坏掉其中一个条件就可以了，其中互斥条件是我们必须的，不能破坏，而其他三个条件是可以破坏的

#### 占有且等待

要破坏这个条件，我们可以采取的做法是对于资源，采取一次性申请的做法，在并发场景下，我们需要一个单例对象来执行资源的申请操作

#### 不可抢占

对于synchronize来说，如果获取不到锁则直接阻塞了，不能再操作释放已有的资源了，而对于ReentranceLock则是可以的

#### 循环等待

我们按照固定的顺序来加锁，可以按照特定的序号从小到大加锁





























